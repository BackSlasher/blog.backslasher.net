<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Why Pinning - BackSlasher</title>
<meta name="description" content="There are plenty of guides about apt pinning, but no one really explains the motivation to do so. It took me some time to understand that, so I thought I’d write it down. The Issue The mainstream method of downloading and installing packages from a repository is via APT (Advanced Packaging Tool). When using apt, the administrator usually says which package he wants installed, but apt needs a bit more information: Which source? The same package may be available from multiple sources. For example, my development server is set up to have 3 repositories, all containing some version of python:">


  <meta name="author" content="Nitzan">
  
  <meta property="article:author" content="Nitzan">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="BackSlasher">
<meta property="og:title" content="Why Pinning">
<meta property="og:url" content="https://blog.backslasher.net/why-pinning.html">


  <meta property="og:description" content="There are plenty of guides about apt pinning, but no one really explains the motivation to do so. It took me some time to understand that, so I thought I’d write it down. The Issue The mainstream method of downloading and installing packages from a repository is via APT (Advanced Packaging Tool). When using apt, the administrator usually says which package he wants installed, but apt needs a bit more information: Which source? The same package may be available from multiple sources. For example, my development server is set up to have 3 repositories, all containing some version of python:">







  <meta property="article:published_time" content="2014-06-14T00:00:00+03:00">






<link rel="canonical" href="https://blog.backslasher.net/why-pinning.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Nitzan",
      "url": "https://blog.backslasher.net/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="BackSlasher Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          BackSlasher
          <span class="site-subtitle">I fix things</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/hireme/">Hire Me</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/nitz.jpg" alt="Nitzan" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Nitzan</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>If this prod is rocking, don’t come a-knocking</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Israel</span>
        </li>
      

      
        
          
            <li><a href="https://backslasher.net" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Backslasher</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Why Pinning">
    <meta itemprop="description" content="There are plenty of guides about apt pinning, but no one really explainsthe motivation to do so. It took me some time to understand that, so Ithought I’d write it down.The IssueThe mainstream method of downloading and installing packages from arepository is via APT (Advanced PackagingTool). When usingapt, the administrator usually says which package he wants installed,but apt needs a bit more information:Which source?The same package may be available from multiple sources. For example, mydevelopment server is set up to have 3 repositories, all containing someversion of python:">
    <meta itemprop="datePublished" content="2014-06-14T00:00:00+03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Why Pinning
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>There are plenty of guides about apt pinning, but no one really explains
the motivation to do so. It took me some time to understand that, so I
thought I’d write it down.</p>
<h3 id="the-issue">The Issue</h3>
<p>The mainstream method of downloading and installing packages from a
repository is via APT <a href="http://en.wikipedia.org/wiki/Advanced_Packaging_Tool">(Advanced Packaging
Tool)</a>. When using
apt, the administrator usually says which package he wants installed,
but apt needs a bit more information:<br />
<strong>Which source?</strong><br />
The same package may be available from multiple sources. For example, my
development server is set up to have 3 repositories, all containing some
version of python:</p>

<ul>
  <li>The Debian <code class="language-plaintext highlighter-rouge">stable</code> repository, guaranteeing compatibility with other
packages</li>
  <li>The Debian <code class="language-plaintext highlighter-rouge">backports</code> repository, including more features but still
pretty stable</li>
  <li>The Debian <code class="language-plaintext highlighter-rouge">unstable</code> repository, offering many new features but
risking weird behaviour and undiscovered bugs </li>
</ul>

<p>Unless told manually which repository to install from, apt has to choose
one by itself. <br />
<strong>Which version?</strong><br />
When maintaining a server farm, it’s important to remember two things:</p>

<ul>
  <li>The software packages should be updated regularly, to protect the
server from bugs and security vulnerabilities that were discovered
(and fixed in newer versions).</li>
  <li>Some upgrades shouldn’t be allowed, because they modify the
software’s behaviour in an unacceptable way. For instance, upgrading
mongodb to version 2.4 changes the JavaScript engine to
multithreading, possibly messing up some scripts. The administrator
can’t afford having some servers with the new versions and some not,
so when installing a new server the administrator doesn’t want the
new package.</li>
</ul>

<p>In short, apt should choose a version that is new, but not too new.</p>

<h3 id="the-solution---priorities">The Solution - Priorities</h3>
<p>To solve this issue, apt assigns each package option
(<code class="language-plaintext highlighter-rouge">name</code>+<code class="language-plaintext highlighter-rouge">version</code>+<code class="language-plaintext highlighter-rouge">source</code>) a priority number. When installing a package, the
command usually looks something like:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>puppet
</code></pre></div></div>
<p>Apt-get then collects all of the possible options, sorts them by
descending priority (highest priority to lowest) and then by descending
version. It chooses the top option and installs that. The administrator
can manipulate the options’ priorities, causing apt to prefer the
“right” version. <br />
For example, I pinned my puppet agent package to a specific version.<br />
When executing:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-cache policy puppet
</code></pre></div></div>
<p>We can see the pinning:<br />
<img src="/assets/why-pinning/puppet-pinned.png" alt="" /></p>

<h3 id="defaults">Defaults</h3>
<p>For Debian / Ubuntu, all of the sources have the same priority - 500.
Usually, apt only encounters one option available of every package, so
there is no collision. When installing / upgrading packages, apt chooses
the latest version released by the official repository - the best
package to install.</p>

<h3 id="dangers-of-pinning">Dangers of Pinning</h3>
<p>Pinning causes apt to change its default behaviour, so if you’re doing
it - you better have a reason. Incorrect pinning can cause:</p>

<ul>
  <li>Not upgrading old packages, meaning you’re exposed to security,
performance and reliability issues</li>
  <li>Upgrading to unstable versions, meaning you’re exposed to (you
guessed it) security, performance and reliability issues</li>
  <li>Installing nonfunctional packages - some sources may upload packages
that are incorrectly built, or contain wrong metadata, causing them
to misbehave and even break other packages</li>
</ul>

<p>See my <a href="|filename|/my-pinning-guidelines.md">other
post</a> about pinning for guidelines about what to pin and how.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#apt" class="page__taxonomy-item" rel="tag">Apt</a><span class="sep">, </span>
    
      <a href="/tags/#debian" class="page__taxonomy-item" rel="tag">Debian</a><span class="sep">, </span>
    
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      <a href="/tags/#security" class="page__taxonomy-item" rel="tag">Security</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#foss" class="page__taxonomy-item" rel="tag">FOSS</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2014-06-14T00:00:00+03:00">June 14, 2014</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/my-pinning-guidelines.html" class="pagination--pager" title="My Pinning Guidelines
">Previous</a>
    
    
      <a href="/linux-and-ssds-should-you-trim.html" class="pagination--pager" title="Linux and SSDs - Should You TRIM?
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <!-- start custom comments snippet -->
<div id="graphcomment"></div>
<script type="text/javascript">

  /* - - - CONFIGURATION VARIABLES - - - */

  // make sure the id is yours
  window.gc_params = {
    graphcomment_id: 'Backslasher-net',

    // if your website has a fixed header, indicate it's height in pixels
    fixed_header_height: 0,
  };

  /* - - - DON'T EDIT BELOW THIS LINE - - - */

  
  (function() {
    var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
    gc.src = 'https://graphcomment.com/js/integration.js?' + Math.round(Math.random() * 1e8);
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
  })();

</script>
<!-- end custom comments snippet -->

  
</div>

    
  </article>

  
  
    <div class="page__related">
      <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
              style="display:block; border-bottom: initial;"
              data-ad-client="ca-pub-7328585512091257"
              data-ad-slot="3049671934"
              data-ad-format="auto"
              data-full-width-responsive="true"></ins>
      </div>
      <h2 class="page__related-title">You May Also Enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/django-db-images.html" rel="permalink">Serving Images from the DB in Django
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I recently got to work on prototyping a small Django-based website that was somewhat like a message board.
One of the features requested was allowing users t...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/k3s-gpu.html" rel="permalink">Running GPU workloads on K3S
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">A team I work with is very happy with the k8s / ArgoCD setup we set up, and now wants to manage their experimental ML workloads in k8s as well.
These workloa...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/fast-toppings.html" rel="permalink">Getting your toppings fast
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I recently ran into a friend that wanted some help with an app. Because the app is in super secret stealth mode, let’s pretend instead it’s “Pizza Advisor” -...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/postgresql-vector.html" rel="permalink">Semantic caching with PSQL, Python, OpenAI
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">You’re an app developer now
Let’s say you’re working on an app. The app helps you search for e-mail messages that relate to a certain topic. This works well ...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

      <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
             style="display:block; border-bottom: initial;"
             data-ad-client="ca-pub-7328585512091257"
             data-ad-slot="3049671934"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Nitzan. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S2WYJL3VQ7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-S2WYJL3VQ7', { 'anonymize_ip': true});
</script>






    <!-- start custom comments scripts -->

<!-- end custom comments scripts -->





    <style>
      .google-auto-placed {
        margin: 2em auto;
      }
    </style>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  </body>
</html>
